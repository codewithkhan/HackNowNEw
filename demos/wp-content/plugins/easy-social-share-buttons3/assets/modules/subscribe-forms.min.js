!function($){"use strict";window.essb_ajax_subscribe=function(e,f){f.preventDefault();var a=$(".essb-subscribe-form-"+e+" #essb-subscribe-from-content-form-mailchimp"),g=$(".essb-subscribe-form-"+e+" .essb-subscribe-form-content"),l=$(g).attr("data-position")||"",m=$(g).attr("data-design")||"";if(a.length){if($(a).find(".essb-subscribe-confirm").length&&!$(a).find(".essb-subscribe-confirm").is(":checked")){f.preventDefault(),essb_settings.subscribe_terms_error?alert(essb_settings.subscribe_terms_error):alert("You need to confirm that you agree with our terms");return}if($(a).find(".essb-subscribe-form-content-name-field").length&&essb_settings.subscribe_validate_name&&""==$(a).find(".essb-subscribe-form-content-name-field").val()){essb_settings.subscribe_validate_name_error?alert(essb_settings.subscribe_validate_name_error):alert("You need to fill name field too");return}var h=$(a).find(".essb-subscribe-form-content-email-field").val(),i=$(a).find(".essb-subscribe-form-content-name-field").length?$(a).find(".essb-subscribe-form-content-name-field").val():"";$(a).find(".submit").prop("disabled",!0),$(a).hide(),$(".essb-subscribe-form-"+e).find(".essb-subscribe-loader").show();for(var c=a.attr("action")+"&mailchimp_email="+h+"&mailchimp_name="+i+"&position="+l+"&design="+m+"&title="+encodeURIComponent(document.title),d=document.querySelectorAll(".essb-subscribe-form-"+e+" #essb-subscribe-from-content-form-mailchimp .essb-subscribe-custom"),j=!1,b=0;b<d.length;b++){if(""==d[b].value&&d[b].classList.contains("essb-subscribe-required")){j=!0,alert("You need to fill "+(d[b].getAttribute("placeholder")||""));break}var k=d[b].getAttribute("data-field")||"";""!=k&&(c+="&mailchimp_"+k+"="+d[b].value)}if(j)return;if(window.location.href.indexOf("https://")> -1&& -1==c.indexOf("https://")&&(c=c.replace("http://","https://")),$(".essb-subscribe-captcha").length){var n=$("#g-recaptcha-response").val();c+="&validate_recaptcha=true&recaptcha="+n}$.post(c,{mailchimp_email1:h,mailchimp_name1:i},function(b){if(b){if(console.log(b),"1"==b.code)$(".essb-subscribe-form-"+e).find(".essb-subscribe-form-content-success").show(),$(".essb-subscribe-form-"+e).find(".essb-subscribe-form-content-error").hide(),$(a).hide(),"undefined"!=typeof essb_subscribe_tracking&&essb_subscribe_tracking(l),"undefined"!=typeof essbSubscribeProLog&&essbSubscribeProLog("subscribe_conversion_success",l,m),b.redirect&&setTimeout(function(){b.redirect_new?window.open(b.redirect,"_blank").focus():window.location.href=b.redirect},200),window.pendingUnlockOnSubscribe&&essb_optin_locker_unlock(),essb.trigger("subscribe_success",{design:m,position:l,email:h,name:i});else{"undefined"!=typeof essbSubscribeProLog&&essbSubscribeProLog("subscribe_conversion_fail",l,m);var c=$(".essb-subscribe-form-"+e).find(".essb-subscribe-form-content-error").attr("data-message")||"";""==c&&$(".essb-subscribe-form-"+e).find(".essb-subscribe-form-content-error").attr("data-message",$(".essb-subscribe-form-"+e).find(".essb-subscribe-form-content-error").text()),90==b.code?$(".essb-subscribe-form-"+e).find(".essb-subscribe-form-content-error").text(b.message):$(".essb-subscribe-form-"+e).find(".essb-subscribe-form-content-error").text(c),$(".essb-subscribe-form-"+e).find(".essb-subscribe-form-content-error").show(),$(".essb-subscribe-form-"+e).find(".essb-subscribe-from-content-form").show(),$(a).find(".submit").prop("disabled",!1)}$(".essb-subscribe-form-"+e).find(".essb-subscribe-loader").hide()}},"json")}},$(document).ready(function(){var h=!1,d=0,a=0,i=window.essb_manualform_show=function(){j("manual"),h=!1},j=function(d){if(!h){var a=".essb-optinbooster-"+d,e=".essb-optinbooster-overlay-"+d;if($(a).length){var i=$(a).attr("data-single")||"",b=$(a).attr("data-single-days")||"";if("1"==i){var f="essbOptinBooster";if("yes"==m(f))return;b=""!=b&&Number(b)?Number(b):14,l(f,"yes",b)}jQuery.fn.extend({center:function(){return this.each(function(){var a=(jQuery(window).height()-jQuery(this).outerHeight())/2,b=(jQuery(window).width()-jQuery(this).outerWidth())/2;jQuery(this).css({position:"fixed",margin:0,top:(a>0?a:0)+"px",left:(b>0?b:0)+"px"})})}});var g=jQuery(window).width();jQuery("document").height();var c=700;if(g<c&&(c=g-60),$(a).css({width:c+"px"}),$(a).center(),$(a).fadeIn(400),$(e).fadeIn(200),$(a).addClass("active-booster"),$(e).addClass("active-booster-overlay"),h=!0,"undefined"!=typeof essbSubscribeProLog){var j=$(a+" .essb-subscribe-form-content").data("position")||"",k=$(a+" .essb-subscribe-form-content").data("design")||"";essbSubscribeProLog("subscribe_conversion_loaded",j,k)}}}},k=function(){$(".active-booster").fadeOut(200),$(".active-booster").removeClass("active-booster"),$(".active-booster-overlay").fadeOut(400),$(".active-booster-overlay").removeClass("active-booster-overlay")};if($(".essb-optinbooster-exit")&&jQuery(document).on("mouseleave",function(a){a.clientY<0&&j("exit")}),$(".essb-optinbooster-scroll")&&(d=$(".essb-optinbooster-scroll").attr("data-scroll")||"",d=parseFloat(d),$(window).on("scroll",function(){if(!h){var a=jQuery(window).scrollTop(),b=jQuery(document).height()-jQuery(window).height();a/b*100>d&&d>0&&j("scroll")}})),$(".essb-optinbooster-time")&&(a=$(".essb-optinbooster-time").attr("data-delay")||"",a=parseFloat(a),setTimeout(function(){j("time")},a*=1e3)),$(".essb-optinbooster-manual").length){var e=$(".essb-optinbooster-manual").data("manual-selector")||"";""!=e&&$(e).length&&$(e).on("click",function(a){a.preventDefault(),i()})}function l(b,c,d){var a=new Date;a.setTime(a.getTime()+864e5*d);var e="expires="+a.toGMTString();document.cookie=b+"="+c+"; "+e+"; path=/"}function m(e){for(var c=e+"=",d=document.cookie.split(";"),a=0;a<d.length;a++){var b=d[a].trim();if(0==b.indexOf(c))return b.substring(c.length,b.length)}return""}$(".essb-optinbooster-overlay").each(function(){$(this).on("click",function(a){a.preventDefault(),k()})}),$(".essb-optinbooster-close").each(function(){$(this).on("click",function(a){a.preventDefault(),k()})});var n=!1,f=0,b=0,o=function(e){if(!n){var a=".essb-optinflyout-"+e;if($(a).length){if("1"==($(a).attr("data-single")||"")){var c="essbOptinFlyout";if("yes"==m(c))return;l(c,"yes",14)}jQuery.fn.extend({center:function(){return this.each(function(){var a=(jQuery(window).height()-jQuery(this).outerHeight())/2,b=(jQuery(window).width()-jQuery(this).outerWidth())/2;jQuery(this).css({position:"fixed",margin:0,top:(a>0?a:0)+"px",left:(b>0?b:0)+"px"})})}});var d=jQuery(window).width();jQuery("document").height();var b=500;if(d<b&&(b=d-60),$(a).css({width:b+"px"}),$(a).slideDown(400),$(a).addClass("active-flyout"),n=!0,"undefined"!=typeof essbSubscribeProLog){var f=$(a+" .essb-subscribe-form-content").data("position")||"",g=$(a+" .essb-subscribe-form-content").data("design")||"";essbSubscribeProLog("subscribe_conversion_loaded",f,g)}}}},p=function(){$(".active-flyout").fadeOut(200),$(".active-flyout").removeClass("active-flyout")};$(".essb-optinflyout-exit")&&$(document).mouseout(function(){var a=window.event;if(a){var b=a.relatedTarget||a.toElement;b&&"HTML"!==b.nodeName||o("exit")}}),$(".essb-optinflyout-scroll")&&(f=$(".essb-optinflyout-scroll").attr("data-scroll")||"",f=parseFloat(f),$(window).on("scroll",function(){if(!n){var a=jQuery(window).scrollTop(),b=jQuery(document).height()-jQuery(window).height();a/b*100>f&&f>0&&o("scroll")}})),$(".essb-optinflyout-time")&&(b=$(".essb-optinflyout-time").attr("data-delay")||"",b=parseFloat(b),setTimeout(function(){o("time")},b*=1e3)),$(".essb-optinflyout-overlay").each(function(){$(this).on("click",function(a){a.preventDefault(),p()})}),$(".essb-optinflyout-close").each(function(){$(this).on("click",function(a){a.preventDefault(),p()})});var q=!1,g=0,c=0,r="essb_optin_locker_unlocked";window.pendingUnlockOnSubscribe=!1,window.essb_optin_locker_unlock=function(){t();var a=$(".essb-optinlocker").data("unlock")||"";Number(a)||(a=90),l(r,"yes",a)};var s=function(c){if(!q){var a=".essb-optinlocker-"+c,d=".essb-optinlocker-overlay-"+c;if($(a).length&&"yes"!=m(r)){jQuery.fn.extend({center:function(){return this.each(function(){var a=(jQuery(window).height()-jQuery(this).outerHeight())/2,b=(jQuery(window).width()-jQuery(this).outerWidth())/2;jQuery(this).css({position:"fixed",margin:0,top:(a>0?a:0)+"px",left:(b>0?b:0)+"px"})})}});var e=jQuery(window).width();jQuery("document").height();var b=700;if(e<b&&(b=e-60),$(a).css({width:b+"px"}),$(a).center(),$(a).fadeIn(400),$(d).fadeIn(200),$(a).addClass("active-locker"),$(d).addClass("active-locker-overlay"),$("body").addClass("removeScroll"),q=!0,window.pendingUnlockOnSubscribe=!0,"undefined"!=typeof essbSubscribeProLog){var f=$(a+" .essb-subscribe-form-content").data("position")||"",g=$(a+" .essb-subscribe-form-content").data("design")||"";essbSubscribeProLog("subscribe_conversion_loaded",f,g)}}}},t=function(){$(".active-locker").fadeOut(200),$(".active-locker").removeClass("active-locker"),$(".active-locker-overlay").fadeOut(400),$(".active-locker-overlay").removeClass("active-locker-overlay"),$("body").removeClass("removeScroll")};$(".essb-optinlocker-scroll")&&(g=$(".essb-optinlocker-scroll").attr("data-scroll")||"",g=parseFloat(g),$(window).on("scroll",function(){if(!q){var a=jQuery(window).scrollTop(),b=jQuery(document).height()-jQuery(window).height();a/b*100>g&&g>0&&s("scroll")}})),$(".essb-optinlocker-time")&&(c=$(".essb-optinlocker-time").attr("data-delay")||"",c=parseFloat(c),setTimeout(function(){s("time")},c=1e3*a)),$(".essb-optinlocker-close").each(function(){$(this).on("click",function(a){a.preventDefault(),t()})}),$(".essb-subscribe-captcha").length&&$(".essb-subscribe-captcha").each(function(){var a=$(this).attr("id")||"";""!=a&&"undefined"!=typeof essb_subscribe_recaptcha&&essb_subscribe_recaptcha&&essb_subscribe_recaptcha.recaptchaSitekey&&setTimeout(function(){grecaptcha.render(a,{sitekey:essb_subscribe_recaptcha.recaptchaSitekey})},500)})})}(jQuery);
